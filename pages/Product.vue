<template>
  <div>
    <section class="breadcrumbs">
      <Breadcrumbs />
      <Nuxt />
    </section>
    <section class="product-layout">
      <div class="container">
        <div class="row">
          <div class="col-lg-2 col-md-3 col-sm-12">
            <Sidebar />

          </div>
          <div class="col-lg-10 col-md-9 col-sm-12">
            <div class="product-listing">
              <div class="row">
                <div class="col-12 product-category">
                  <h2>BACKPACKS</h2>
                </div>
                <div class="col-4">
                  <nuxt-link to="singleproduct">
                    <div class="product-card">
                      <img src="~/assets/images/bag1.jpg">
                      <div class="fav-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                          <!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) -->
                          <path
                            d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z" />
                        </svg>
                      </div>
                      <ul class="product-color">
                        <li><img src="~/assets/images/color.png"></li>
                        <li><img src="~/assets/images/color.png"></li>
                        <li><img src="~/assets/images/color.png"></li>
                      </ul>
                      <h2>SLIM BACKPACK</h2>
                      <span>RS.24,000</span>
                    </div>
                  </nuxt-link>



                </div>
                <div class="col-4">
                  <div class="product-card">
                    <img src="~/assets/images/bag1.jpg">
                    <div class="fav-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) -->
                        <path
                          d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z" />
                      </svg>
                    </div>
                    <ul class="product-color">
                      <li><img src="~/assets/images/color.png"></li>
                      <li><img src="~/assets/images/color.png"></li>
                      <li><img src="~/assets/images/color.png"></li>
                    </ul>
                    <h2>SLIM BACKPACK</h2>
                    <span>RS.24,000</span>
                  </div>



                </div>
                <div class="col-4">
                  <div class="product-card">
                    <img src="~/assets/images/bag1.jpg">
                    <div class="fav-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) -->
                        <path
                          d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z" />
                      </svg>
                    </div>
                    <ul class="product-color">
                      <li><img src="~/assets/images/color.png"></li>
                      <li><img src="~/assets/images/color.png"></li>
                      <li><img src="~/assets/images/color.png"></li>
                    </ul>
                    <h2>SLIM BACKPACK</h2>
                    <span>RS.24,000</span>
                  </div>



                </div>
                <div class="col-4">
                  <div class="product-card">
                    <img src="~/assets/images/bag1.jpg">
                    <div class="fav-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) -->
                        <path
                          d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z" />
                      </svg>
                    </div>
                    <ul class="product-color">
                      <li><img src="~/assets/images/color.png"></li>
                      <li><img src="~/assets/images/color.png"></li>
                      <li><img src="~/assets/images/color.png"></li>
                    </ul>
                    <h2>SLIM BACKPACK</h2>
                    <span>RS.24,000</span>
                  </div>



                </div>
                <div class="col-4">
                  <div class="product-card">
                    <img src="~/assets/images/bag1.jpg">
                    <div class="fav-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) -->
                        <path
                          d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z" />
                      </svg>
                    </div>
                    <ul class="product-color">
                      <li><img src="~/assets/images/color.png"></li>
                      <li><img src="~/assets/images/color.png"></li>
                      <li><img src="~/assets/images/color.png"></li>
                    </ul>
                    <h2>SLIM BACKPACK</h2>
                    <span>RS.24,000</span>
                  </div>



                </div>
                <div class="col-4">
                  <div class="product-card">
                    <img src="~/assets/images/bag1.jpg">
                    <div class="fav-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) -->
                        <path
                          d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z" />
                      </svg>
                    </div>
                    <ul class="product-color">
                      <li><img src="~/assets/images/color.png"></li>
                      <li><img src="~/assets/images/color.png"></li>
                      <li><img src="~/assets/images/color.png"></li>
                    </ul>
                    <h2>SLIM BACKPACK</h2>
                    <span>RS.24,000</span>
                  </div>



                </div>
              </div>

            </div>

          </div>

        </div>

      </div>

    </section>
  </div>
</template>

<script>
import axios from 'axios'
import Sidebar from '@/components/Sidebar'
import Breadcrumbs from '@/components/Breadcrumbs'
export default {
  components: {
    Breadcrumbs,
    Sidebar
  },
  data() {
    return {
      slug: '',
      products: {},
      baseURL: this.$axios.defaults.baseURL, // Base Url

    }
  },
  mounted() {

    this.getSlug();  // Get Slug from URL

    this.getProducts();  // Get Prdocuts function hits axios for subCategory  api

  },

  methods: {
    getSlug() {
      let url = new URL(location.href)
      this.slug = url.searchParams.get("slug");
    },
    getProducts() {
      axios.get(this.baseURL + 'api/childCategory?slug=' + this.slug) //subCategory End point
        .then((response) => {
          console.log('hala', response.data.data);
          this.products = response.data.data;
        }).catch(() => 'Products not available') //in case no product Available
    }
  }

}

</script>
